# 横看成岭侧成峰，远近高低各不同 --访问者模式的标准实现@Java     
![image](https://user-images.githubusercontent.com/64548919/131656789-f3cbdb96-e044-4b9e-a4c9-b7e23f7285ec.png)

## 1. 为什么要学习访问者模式？
在软件设计的过程中，有一些对象封装了很多种类的元素，允许不同的外部用户端进行不同的元素。        
其中，不同的用户端的访问侧重点是有所差异的，可能只关心其中的某一个或者某几个元素的内部特征。         

访问者模式提供了一种对这类多样性很强，结构却相对稳定的对象访问处理模式，       
能够将处理方法与对应的数据结构剥离开来，并且根据需要增加新的处理方法，无需修改原有的代码结构。
访问者模式大大提高了程序的可扩展性和灵活性。       

## 2. 访问者模式能解决什么问题？
访问者模式主要能够解决稳定但多样化的数据结构，访问方式易变的访问问题。       

## 3. 访问者模式有哪些必要的实现步骤？
必要的实现步骤：        
1. 定义抽象访问者，其中对于每一个可能的元素实现多态，都要定义同名方法visit供外部多态化调用；        
2. 定义具体访问者，实现抽象访问者接口，规定访问者在访问的时候的行为；       
3. 定义抽象元素，其中需要有一个accept()接口方法，其参数列表需要包括抽象访问者对象；         
4. 定义具体元素，实现抽象元素接口，一般都是visitor.visit(this)，可以根据需求增加额外的操作类型；       
5. 定义对象容器，其中一般封装元素的容器对象，提供一个外部接口运行访问者对象对容器元素批量访问；       

## 4. 访问者模式有哪些优缺点？
优点：       
1. 扩展性良好，可以无需修改对象结构的元素来添加新功能；      
2. 复用性良好，访问者可以定义整个对象结构的通用功能，增强系统的复用度；      
3. 灵活性良好，今天将数据结构与对应的操作解耦处理；      
4. 符合“单一职责原则”，使得访问者功能单一化；        

缺点：        
1. 增加新的多态实现类非常困难，这时候需要在访问者接口中增加对应的方法；       
而根据接口的实现语法规则，实现它的所有子类都要增加对应的方法，操作冗余且繁琐；        
2. 破坏封装性。访问者模式将具体元素可能的多态实现对用户端暴露，不符合对象的封装性；       
3. 违反“依赖倒转原则”，访问者模式需要依赖具体类而非抽象类；      
